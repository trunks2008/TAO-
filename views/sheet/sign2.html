<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>sign</title>

		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../../css/mui.min.css">
		<script src="../../js/mui.min.js"></script>

		<script src="../../js/coordinate.js"></script>
		<script src="../../js/constants.js"></script>
		<script src="../../js/ajaxutils.js"></script>
		<script src="../../js/serverutils.js"></script>
		<script src="../../js/timeutils.js"></script>

		<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=dfcb8070bacc1279d43ddd3abd672d7b"></script>

		<style>

		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">地理签到2</h1>
		</header>

		<div class="mui-content mui-scroll-wrapper">
			<div id="container" style="height: 280px">

			</div>
		</div>

		<script>
			var map = new AMap.Map('container', {
				resizeEnable: true
			});
			
 
			map.plugin('AMap.Geolocation', function() {
				var geolocation = new AMap.Geolocation({
					// 是否使用高精度定位，默认：true
					enableHighAccuracy: true,
					// 设置定位超时时间，默认：无穷大
					timeout: 10000,
					// 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)
					buttonOffset: new AMap.Pixel(10, 20),
					//  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
					zoomToAccuracy: true,
					//  定位按钮的排放位置,  RB表示右下
					buttonPosition: 'RB'
				})

				geolocation.getCurrentPosition();
				AMap.event.addListener(geolocation, 'complete', onComplete);
				AMap.event.addListener(geolocation, 'error', onError);

				map.addControl(geolocation);
				map.setZoom(16);

				function onComplete(data) {
					// data是具体的定位信息
				}

				function onError(data) {
					// 定位出错
				}
			});
			
		</script>

	</body>

</html>